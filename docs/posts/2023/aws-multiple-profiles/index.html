<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS multiple accounts profiles with cli/terraform | virture.de - just a blog</title>
<meta name=keywords content="aws,terraform"><meta name=description content="AWS multiple accounts/profiles If you&rsquo;re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here&rsquo;s how you can set up and use multiple profiles:
Setting Up Multiple Profiles You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).
Here&rsquo;s an example for ~/."><meta name=author content="Michael"><link rel=canonical href=https://www.virture.de/posts/2023/aws-multiple-profiles/><link crossorigin=anonymous href=/assets/css/stylesheet.1f28a8812024f3d082361c1abf7913baf83dd8b4bbf6c1463b9dbf1bb0c2d81d.css integrity="sha256-HyiogSAk89CCNhwav3kTuvg92LS79sFGO52/G7DC2B0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.virture.de/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.virture.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.virture.de/favicon-32x32.png><link rel=apple-touch-icon href=https://www.virture.de/apple-touch-icon.png><link rel=mask-icon href=https://www.virture.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="AWS multiple accounts profiles with cli/terraform"><meta property="og:description" content="AWS multiple accounts/profiles If you&rsquo;re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here&rsquo;s how you can set up and use multiple profiles:
Setting Up Multiple Profiles You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).
Here&rsquo;s an example for ~/."><meta property="og:type" content="article"><meta property="og:url" content="https://www.virture.de/posts/2023/aws-multiple-profiles/"><meta property="og:image" content="https://www.virture.de/posts/2023/aws-multiple-profiles/images/img04.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-16T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-16T00:00:00+00:00"><meta property="og:site_name" content="virture"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.virture.de/posts/2023/aws-multiple-profiles/images/img04.png"><meta name=twitter:title content="AWS multiple accounts profiles with cli/terraform"><meta name=twitter:description content="AWS multiple accounts/profiles If you&rsquo;re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here&rsquo;s how you can set up and use multiple profiles:
Setting Up Multiple Profiles You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).
Here&rsquo;s an example for ~/."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.virture.de/posts/"},{"@type":"ListItem","position":3,"name":"AWS multiple accounts profiles with cli/terraform","item":"https://www.virture.de/posts/2023/aws-multiple-profiles/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS multiple accounts profiles with cli/terraform","name":"AWS multiple accounts profiles with cli\/terraform","description":"AWS multiple accounts/profiles If you\u0026rsquo;re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here\u0026rsquo;s how you can set up and use multiple profiles:\nSetting Up Multiple Profiles You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).\nHere\u0026rsquo;s an example for ~/.","keywords":["aws","terraform"],"articleBody":"AWS multiple accounts/profiles If you’re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here’s how you can set up and use multiple profiles:\nSetting Up Multiple Profiles You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).\nHere’s an example for ~/.aws/credentials:\n[default] aws_access_key_id = YOUR_DEFAULT_ACCESS_KEY aws_secret_access_key = YOUR_DEFAULT_SECRET_KEY [profileName1] aws_access_key_id = YOUR_ACCESS_KEY_FOR_PROFILE1 aws_secret_access_key = YOUR_SECRET_KEY_FOR_PROFILE1 [profileName2] aws_access_key_id = YOUR_ACCESS_KEY_FOR_PROFILE2 aws_secret_access_key = YOUR_SECRET_KEY_FOR_PROFILE2 And for ~/.aws/config:\n[default] region = us-west-1 [profile profileName1] region = us-east-1 [profile profileName2] region = eu-central-1 Alternatively, you can use the AWS CLI to configure these profiles:\naws configure --profile profileName1 This command will prompt you for the necessary details for profileName1.\nUsing a Specific Profile To use a specific profile with the AWS CLI, use the –profile flag:\naws s3 ls --profile profileName1 ","wordCount":"157","inLanguage":"en","image":"https://www.virture.de/posts/2023/aws-multiple-profiles/images/img04.png","datePublished":"2023-08-16T00:00:00Z","dateModified":"2023-08-16T00:00:00Z","author":{"@type":"Person","name":"Michael"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.virture.de/posts/2023/aws-multiple-profiles/"},"publisher":{"@type":"Organization","name":"virture.de - just a blog","logo":{"@type":"ImageObject","url":"https://www.virture.de/images/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://www.virture.de accesskey=h title="home (Alt + H)"><img src=https://www.virture.de/images/robot.png alt aria-label=logo height=35>home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://www.virture.de/posts title=blog><span>blog</span></a></li><li><a href=https://www.virture.de/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.virture.de/categories/ title=categories><span>categories</span></a></li><li><a href=https://www.virture.de/tags/ title=tags><span>tags</span></a></li><li><a href=https://www.virture.de/archives title=archive><span>archive</span></a></li><li><a href=https://www.virture.de/about/ title=about><span>about</span></a></li><li><a href=https://www.virture.de/imprint/ title=imprint><span>imprint</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.virture.de>Home</a>&nbsp;»&nbsp;<a href=https://www.virture.de/posts/>Posts</a></div><h1 class=post-title>AWS multiple accounts profiles with cli/terraform</h1><div class=post-meta>&lt;span title='2023-08-16 00:00:00 +0000 UTC'>August 16, 2023&lt;/span>&amp;nbsp;·&amp;nbsp;1 min&amp;nbsp;·&amp;nbsp;157 words&amp;nbsp;·&amp;nbsp;Michael</div></header><figure class=entry-cover><img loading=lazy src=https://www.virture.de/images/img04.png alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#aws-multiple-accountsprofiles>AWS multiple accounts/profiles</a><ul><li><a href=#setting-up-multiple-profiles>Setting Up Multiple Profiles</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=aws-multiple-accountsprofiles>AWS multiple accounts/profiles<a hidden class=anchor aria-hidden=true href=#aws-multiple-accountsprofiles>#</a></h2><p>If you&rsquo;re working with multiple AWS accounts or environments, using named profiles with the AWS CLI can be very handy. Named profiles are configurations of AWS access keys, secret keys, and default regions. Here&rsquo;s how you can set up and use multiple profiles:</p><h3 id=setting-up-multiple-profiles>Setting Up Multiple Profiles<a hidden class=anchor aria-hidden=true href=#setting-up-multiple-profiles>#</a></h3><p>You can add profiles directly to your AWS configuration file (~/.aws/config) and your credentials file (~/.aws/credentials).</p><p>Here&rsquo;s an example for ~/.aws/credentials:</p><pre tabindex=0><code>[default]
aws_access_key_id = YOUR_DEFAULT_ACCESS_KEY
aws_secret_access_key = YOUR_DEFAULT_SECRET_KEY

[profileName1]
aws_access_key_id = YOUR_ACCESS_KEY_FOR_PROFILE1
aws_secret_access_key = YOUR_SECRET_KEY_FOR_PROFILE1

[profileName2]
aws_access_key_id = YOUR_ACCESS_KEY_FOR_PROFILE2
aws_secret_access_key = YOUR_SECRET_KEY_FOR_PROFILE2
</code></pre><p>And for ~/.aws/config:</p><pre tabindex=0><code>[default]
region = us-west-1

[profile profileName1]
region = us-east-1

[profile profileName2]
region = eu-central-1
</code></pre><p>Alternatively, you can use the AWS CLI to configure these profiles:</p><pre tabindex=0><code>aws configure --profile profileName1
</code></pre><p>This command will prompt you for the necessary details for profileName1.</p><p>Using a Specific Profile
To use a specific profile with the AWS CLI, use the &ndash;profile flag:</p><pre tabindex=0><code>
aws s3 ls --profile profileName1
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.virture.de/tags/aws/>aws</a></li><li><a href=https://www.virture.de/tags/terraform/>terraform</a></li></ul><nav class=paginav><a class=prev href=https://www.virture.de/posts/2023/kubernetes-nodes-setup/><span class=title>« Prev</span><br><span>kubernetes nodes setup</span>
</a><a class=next href=https://www.virture.de/posts/2023/arima/><span class=title>Next »</span><br><span>Auotoregressive Intregrated Moving Average (ARIMA)</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.virture.de>virture.de - just a blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>